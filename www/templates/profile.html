<ion-view view-title="Meu Perfil">

    <ion-content class="scroll-bg">
        <div class="list card">
            <div class="item" ng-if="user.fbId==null">
                <button class="button button-positive button-block  icon-left ion-social-facebook" ng-click="doLoginFB()">Conectar com Facebook</button>
            </div>
            <div class="item row" ng-show="user.id==null">
                <div class="col-50">
                    <button class="button button-balanced button-outline button-block" ng-click="doLogin()">Login</button>
                </div>
                <div class="col-50">
                    <button class="button button-balanced button-outline button-block" ng-click="doShowForm()">Criar uma conta</button>
                </div>

            </div>
            <div class="assertive" ng-show="errorMsg!=null" ng-cloak>{{errorMsg}}</div>
            <form class="item" name="profileForm" novalidate>
                <div ng-show="user.id!=null || showForm">
                    <div style="max-height: 40%;" ng-show="user.fbId!=null" ng-cloak>
                        <img class="imageProfile " style="max-width: 60px; max-height: 100px;" ng-src="http://graph.facebook.com/{{user.fbId}}/picture?width=128&height=128">
                    </div>
                    <label class="item item-input">
                        <input type="text" placeholder="Nome" ng-model="user.nome" ng-change="haschange=true">
                    </label>
                    <label class="item item-input">
                        <input type="email" placeholder="E-mail" ng-model="user.email" ng-required="true" name="profileEmail" ng-disabled="user.id!=null">
                    </label>
                    <label class="item item-input">
                        <input type="tel" placeholder="(XX) XXXX-XXXX" ng-model="user.telefone" ng-change="haschange=true">
                    </label>

                    <label class="item item-input item-button-right" ng-show="showForm" ng-cloak>
                       
                        <input ng-show="showpassword" type="text" placeholder="Senha" ng-model="user.password">
                        <input ng-hide="showpassword" type="password" placeholder="Senha" ng-model="user.password">

                    </label>


                </div>
                <div class="item">
                    <button class="button button-balanced" ng-click="saveData()" ng-cloak ng-disabled="!haschange || haschange==false" ng-show="user.id!=null || showForm">
                        Salvar
                    </button>
                    <button class="button" ng-click="logoff()" ng-cloak ng-show="user.id!=null ">
                        Desconectar
                    </button>
                </div>

            </form>
        </div>

    </ion-content>
</ion-view>

<script id="my-modal.html" type="text/ng-template">
    <ion-modal-view>
        <ion-header-bar>
            <h1 class="title">My Modal title</h1>
        </ion-header-bar>
        <ion-content>
            Hello!
        </ion-content>
    </ion-modal-view>
</script>